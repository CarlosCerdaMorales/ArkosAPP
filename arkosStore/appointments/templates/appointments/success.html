{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'appointments/success.css' %}">
{% endblock %}

{% block content %}
<div class="profile-wrapper">
    
    <div class="profile-card" style="text-align: center;">
        
        <span class="success-icon">✓</span>
        
        <h2 class="profile-title" style="margin-bottom: 10px;">¡Reserva Confirmada!</h2>
        
        {% if appointment.user %}
            <p>Hola <b>{{ appointment.user.username }}</b>, tu cita ha sido agendada correctamente.</p>
        {% else %}
            <p>Hola <b>{{ appointment.guest_first_name }}</b>, tu cita ha sido agendada correctamente.</p>
        {% endif %}

        <div class="receipt-data">
            <div class="receipt-row">
                <span class="receipt-label">Servicio:</span>
                <span class="receipt-value">{{ appointment.service.get_name_display }}</span>
            </div>
            <div class="receipt-row">
                <span class="receipt-label">Día:</span>
                <span class="receipt-value">{{ appointment.datetime|date:"d/m/Y" }}</span>
            </div>
            <div class="receipt-row">
                <span class="receipt-label">Hora:</span>
                <span class="receipt-value">{{ appointment.datetime|date:"H:i" }}</span>
            </div>
            <div class="receipt-row">
                <span class="receipt-label">Especialista:</span>
                <span class="receipt-value">{{ appointment.worker.name }}</span>
            </div>
             <div class="receipt-row">
                <span class="receipt-label">Duración:</span>
                <span class="receipt-value">{{ appointment.service.duration }} min</span>
            </div>

            {% if not appointment.user %}
                <hr>
                <div class="receipt-row">
                    <span class="receipt-label">Nombre:</span>
                    <span class="receipt-value">{{ appointment.guest_first_name }} {{ appointment.guest_last_name }}</span>
                </div>
                <div class="receipt-row">
                    <span class="receipt-label">Email:</span>
                    <span class="receipt-value">{{ appointment.guest_email }}</span>
                </div>
                <div class="receipt-row">
                    <span class="receipt-label">Teléfono:</span>
                    <span class="receipt-value">{{ appointment.guest_phone }}</span>
                </div>
            {% endif %}
        </div>

        <div class="profile-form-actions">
            {% if user.is_authenticated %}
                <a href="{% url 'upcoming_appointments' %}" class="profile-btn">
                    Ver mis reservas
                </a>
            {% else %}
                <a href="/" class="profile-btn">
                    Volver al inicio
                </a>
                
                <p class="register-promo">
                    ¿Quieres gestionar tus citas futuras? 
                    <a href="{% url 'register' %}" class="register-link">Regístrate aquí</a>
                </p>
            {% endif %}
        </div>

    </div>
</div>
{% endblock %}